\chapter{A Deep-Inference Formalism}

\section{Definitions}

\begin{definition}
An \emph{inference rule instance}, $\vlinf{\rho}{}{\beta}{\alpha}$, consists of two formulae, $\alpha$ and $\beta$, called \emph{premiss} and \emph{conclusion} respectively.
\end{definition}

\begin{definition}
Fix a set of formulae, a set of inference rule instances and a set of logical connectives, then a \emph{(Formalism A) derivation $\vlder{\Psi}{}{\beta}{\alpha}$ from (the formula) $\alpha$ to (the formula) $\beta$}, is defined to be
\begin{enumerate}
 \item a formula, $\Psi=\alpha=\beta$;
 \item a vertical composition
 \[
 \Psi\;=\;
 \vlder{\vlinf{\rho}{}{\Phi_2}{\Phi_1}}{}{\beta}{\alpha}
 \]
 where $\vlinf{\rho}{}{\delta}{\gamma}$ is an inference rule instance and $\vlder{\Phi_1}{}{\gamma}{\alpha}$ and $\vlder{\Phi_2}{}{\beta}{\delta}$ are derivations;
 \item a horizontal composition
 \[
 \Psi=\vlder{\circ(\Phi_1,\dots,\Phi_n)}{}{\circ(\beta_1,\dots,\beta_n)}{\circ(\alpha_1,\dots,\alpha_n)}\quad,
 \]
 where $\circ$ is an $n$-ary logical connective, $\alpha=\circ(\alpha_1,\dots,\alpha_n)$, $\beta=\circ(\beta_1,\dots,\beta_n)$ and $\vlder{\Phi_1}{}{\beta_1}{\alpha_1}$, $\dots$, $\vlder{\Phi_n}{}{\beta_n}{\alpha_n}$ are derivations.
\end{enumerate}
\end{definition}

\begin{lemma}\label{LemDerComp}
Given two derivations $\vlder{\Phi_1}{}{\beta}{\alpha}$ and $\vlder{\Phi_2}{}{\gamma}{\beta}$, a derivation $\vlder{\Phi_1;\Phi_2}{}{\gamma}{\alpha}$ can be constructed.
\end{lemma}

\begin{proof}
We argue by structural induction on $\Phi_1$ and $\Phi_2$
\begin{enumerate}

 \item if $\Phi_1=\beta$ then $\Psi=\Phi_2$;

 \item if $\Phi_2=\beta$ then $\Psi=\Phi_1$;

 \item if $\Phi_1\;=\;\vlder{\vlinf{\rho}{}{\Phi_1''}{\Phi_1'}}{}{\beta}{\alpha}$, then $\Phi_1'';\Phi_2$ can be constructed by the inductive hypothesis and we can build $\Psi\;=\;\vlder{\vlinf{\rho}{}{\Phi_1'';\Phi_2}{\Phi_1'}}{}{\gamma}{\alpha}$;

 \item if $\Phi_2\;=\;\vlder{\vlinf{\rho}{}{\Phi_2''}{\Phi_2'}}{}{\gamma}{\beta}$, then $\Phi_1;\Phi_2'$ can be constructed by the inductive hypothesis and we can build $\Psi\;=\;\vlder{\vlinf{\rho}{}{\Phi_2''}{\Phi_1;\Phi_2'}}{}{\gamma}{\alpha}$;

 \item if $\Phi_1=\circ(\Phi_{1,1},\dots,\Phi_{1,n})$ and $\Phi_2=\circ(\Phi_{2,1},\dots,\Phi_{2,n})$ then $\Phi_{1,1};\Phi_{2,1},\dots,\Phi_{1,n};\Phi_{2,n}$ can be constructed by the inductive hypothesis and we can build $\Phi_1;\Phi_2=\circ(\Phi_{1,1};\Phi_{2,1},\dots,\Phi_{1,n};\Phi_{2,n})$.

\end{enumerate}
\end{proof}

\begin{definition}
Given $\Phi_1$ and $\Phi_2$ as in the premiss of Lemma~\ref{LemDerComp}, the derivation $\Phi_1;\Phi_2$ constructed in the proof of the lemma is denoted
\[
\vlderivation
{
 \vlde{\Phi_2}{}{\gamma}
 {
  \vlde{\Phi_1}{}{\beta}
  {
   \vlhy{\alpha}
  }
 }
}\quad.
\]
\end{definition}

\begin{lemma}
Given derivations $\vlder{\Phi_1}{}{\beta}{\alpha}$, $\vlder{\Phi_2}{}{\gamma}{\beta}$ and $\vlder{\Phi_3}{}{\delta}{\gamma}$ the derivation
\[
\vlderivation
{
 \vlde{\Phi_3}{}{\delta}
 {
  \vlde{\Phi_2}{}{\gamma}
  {
   \vlde{\Phi_1}{}{\beta}
   {
    \vlhy{\alpha}
   }
  }
 }
}
\]
is unique.
\end{lemma}

\section{Comparison with the Calculus of Structures}

\begin{theorem}
Formalism A p-simulates the calculus of structures and the calculus of structures p-simulates Formalism A.
\end{theorem}

\begin{theorem}
A formalism A derivation corresponds to an equivalence class of calculus of structures derivations modulo bureaucracy of type A.
\end{theorem}